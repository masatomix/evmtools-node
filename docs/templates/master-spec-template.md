# {ClassName} 仕様書

**バージョン**: 1.0.0
**作成日**: {YYYY-MM-DD}
**ソースファイル**: `src/{layer}/{ClassName}.ts`

---

## 1. 基本情報

### 1.1 概要

| 項目 | 内容 |
|------|------|
| **クラス名** | `{ClassName}` |
| **分類** | **{エンティティ/値オブジェクト/ドメインサービス/アダプター/集約ルート}** |
| **実装インターフェース** | `{InterfaceName}`（該当する場合） |
| **パッケージ** | `src/{layer}/{ClassName}.ts` |
| **責務** | {このクラスの主な責務を1-2文で説明} |

### 1.2 ユビキタス言語（ドメイン用語）

| ドメイン用語 | 実装名 | 定義 |
|-------------|--------|------|
| {用語1} | `{implementationName1}` | {定義} |
| {用語2} | `{implementationName2}` | {定義} |

### 1.3 境界づけられたコンテキスト（所属ドメイン）

```
┌─────────────────────────────────────────────────────────────┐
│                      {レイヤー名}層                          │
│  ┌─────────────────┐  ┌─────────────────────────────────┐  │
│  │ 関連クラス1      │  │ {ClassName}                     │  │
│  │                 │  │                                 │  │
│  └────────┬────────┘  └───────────────┬─────────────────┘  │
│           │                           │                    │
│           └───────────┬───────────────┘                    │
│                       ▼                                    │
├───────────────────────┼────────────────────────────────────┤
│                       ▼                                    │
│  ┌───────────────────────────────────────────────────────┐ │
│  │              {依存先クラス/インターフェース}            │ │
│  └───────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

---

## 2. 不変条件（Invariants）

| ID | 不変条件 | 検証タイミング |
|----|----------|----------------|
| INV-{XX}-01 | {不変条件の説明} | {全操作/生成時/特定メソッド} |
| INV-{XX}-02 | {不変条件の説明} | {検証タイミング} |

---

## 3. プロパティ仕様

### 3.1 コンストラクタ引数

| プロパティ | 型 | 必須 | 制約 | デフォルト | 説明 |
|-----------|-----|:----:|------|-----------|------|
| `{prop1}` | `Type1` | ○ | {制約} | - | {説明} |
| `{prop2}` | `Type2` | - | {制約} | `undefined` | {説明} |

### 3.2 公開プロパティ（getter）

| プロパティ | 戻り型 | 説明 |
|-----------|--------|------|
| `{prop1}` | `Type1` | {説明} |
| `{prop2}` | `Type2` | {説明} |

### 3.3 内部キャッシュ（該当する場合）

| プロパティ | 型 | 説明 |
|-----------|-----|------|
| `_cached{Xxx}` | `Type \| undefined` | {キャッシュの説明} |

---

## 4. コンストラクタ仕様

### 4.1 シグネチャ

```typescript
constructor(
    param1: Type1,
    param2?: Type2,
    options?: {ClassName}Options
)

type {ClassName}Options = {
    option1?: Type1  // デフォルト: {defaultValue}
}
```

### 4.2 事前条件（Preconditions）

| ID | 条件 | 違反時の動作 |
|----|------|-------------|
| PRE-C01 | {事前条件の説明} | {エラー内容} |
| PRE-C02 | {事前条件の説明} | {エラー内容} |

### 4.3 事後条件（Postconditions）

| ID | 条件 |
|----|------|
| POST-C01 | {事後条件の説明} |
| POST-C02 | {事後条件の説明} |

---

## 5. メソッド仕様

### 5.1 `{methodName}(): {ReturnType}`

#### 目的
{メソッドの目的}

#### シグネチャ
```typescript
{methodName}(param1: Type1, param2?: Type2): ReturnType
```

#### 事前条件

| ID | 条件 | 違反時の動作 |
|----|------|-------------|
| PRE-{XX}-01 | {事前条件} | {動作} |

#### 事後条件

| ID | 条件 |
|----|------|
| POST-{XX}-01 | {事後条件} |
| POST-{XX}-02 | {事後条件} |

#### アルゴリズム

```
1. {手順1}
   - {詳細}
2. {手順2}
3. {手順3}
```

#### ビジネスルール

| ID | ルール | 違反時の動作 |
|----|--------|-------------|
| BR-{XX}-01 | {ビジネスルール} | {動作} |

#### 例外処理

| 条件 | エラー内容 |
|------|-----------|
| {条件1} | `Error: {メッセージ}` |

#### 同値クラス・境界値

| ID | 分類 | 入力条件 | 期待結果 |
|----|------|----------|----------|
| EQ-{XX}-001 | 正常系 | {入力条件} | {期待結果} |
| EQ-{XX}-002 | 境界値 | {境界条件} | {期待結果} |
| EQ-{XX}-003 | 異常系 | {異常条件} | {エラー} |

---

### 5.2 `{methodName2}(): {ReturnType2}`

{同様の形式で記載}

---

## 6. テストシナリオ（Given-When-Then形式）

### 6.1 {カテゴリ名}

```gherkin
Scenario: {シナリオ名}
  Given {前提条件}
  And   {追加の前提条件}
  When  {実行するアクション}
  Then  {期待される結果}
  And   {追加の期待結果}
```

```gherkin
Scenario: {別のシナリオ名}
  Given {前提条件}
  When  {実行するアクション}
  Then  {期待される結果}
```

### 6.2 異常系

```gherkin
Scenario: {エラーシナリオ名}
  Given {異常な前提条件}
  When  {実行するアクション}
  Then  {エラーが発生する}
```

---

## 7. 外部依存

| 名前 | 種別 | 説明 |
|------|------|------|
| `{dependency1}` | {標準ライブラリ/npm/内部モジュール} | {依存の説明} |
| `{dependency2}` | {種別} | {依存の説明} |

---

## 8. 関連オブジェクト

### 8.1 依存関係図

```
┌─────────────────────────────────────────────────────────────┐
│                      {ClassName}                            │
│  ({分類})                                                   │
├─────────────────────────────────────────────────────────────┤
│                         │                                   │
│    ┌────────────────────┼────────────────────┐              │
│    ▼                    ▼                    ▼              │
│ {Related1}         {Related2}            {Related3}         │
│ ({分類})           ({分類})              ({分類})           │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 関係一覧

| 関係先 | 関係タイプ | 説明 |
|--------|-----------|------|
| `{RelatedClass1}` | {implements/extends/uses/creates/aggregates} | {関係の説明} |
| `{RelatedClass2}` | {関係タイプ} | {関係の説明} |

---

## 9. テストケース数サマリ

| カテゴリ | 計画 | 実装 |
|----------|------|------|
| コンストラクタ | {N}件 | {M}件 |
| {methodName1} | {N}件 | {M}件 |
| {methodName2} | {N}件 | {M}件 |
| シナリオテスト | {N}件 | {M}件 |
| **合計** | **{X}件** | **{Y}件** |

---

## 10. 要件トレーサビリティ

> **重要**: このセクションは必須です。grepで検索可能な形式で記載すること。

| 要件ID | 受け入れ基準 | 対応テストケース | 結果 |
|--------|-------------|-----------------|------|
| REQ-{XXX}-001 AC-01 | {受け入れ基準} | EQ-{XX}-001, TC-01 | ⏳ |
| REQ-{XXX}-001 AC-02 | {受け入れ基準} | EQ-{XX}-002, TC-02 | ⏳ |

> **ステータス凡例**:
> - ⏳: 未実装
> - ✅ PASS: テスト合格
> - ❌ FAIL: テスト失敗

---

## 11. テスト実装

### 11.1 テストファイル

| ファイル | 説明 | テスト数 |
|---------|------|---------|
| `src/{layer}/__tests__/{ClassName}.test.ts` | 単体テスト | {N}件 |
| `src/{layer}/__tests__/{ClassName}.integration.test.ts` | 統合テスト（該当する場合） | {M}件 |

### 11.2 テストフィクスチャ（該当する場合）

| ファイル | 用途 |
|---------|------|
| `{fixture1}` | {用途} |
| `{fixture2}` | {用途} |

### 11.3 テスト実行結果

```
実行日: {YYYY-MM-DD}
Test Suites: {N} passed, {N} total
Tests:       {M} passed, {M} total
```

---

## 12. 設計上の課題・改善提案（該当する場合）

| 課題 | 現状 | 改善案 |
|------|------|--------|
| {課題1} | {現状} | {改善案} |
| {課題2} | {現状} | {改善案} |

---

## 13. 変更履歴

| バージョン | 日付 | 変更内容 | 要件ID |
|-----------|------|---------|--------|
| 1.0.0 | {YYYY-MM-DD} | 初版作成 | REQ-{XXX}-001 |
