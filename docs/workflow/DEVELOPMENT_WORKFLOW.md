# 開発ワークフロー

**作成日**: 2025-12-16
**バージョン**: 1.0.0

---

## 1. 概要

本プロジェクトでは、**Git Flow** ブランチ戦略と**仕様駆動開発（Spec-Driven Development）**を組み合わせた開発ワークフローを採用しています。

---

## 2. 開発フロー詳細

### 2.1 全体フロー図

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           開発ワークフロー全体図                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│       【Issue First + 仕様駆動開発 (Forward)】                              │
│                                                                             │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌────────┐│
│  │ 0.Issue │───▶│ 1. 要件  │───▶│ 2. 仕様  │───▶│ 3.テスト │───▶│ 4.実装 ││
│  │  作成   │    │   定義   │    │   作成   │    │ コード   │    │        ││
│  └──────────┘    └──────────┘    └──────────┘    └──────────┘    └────────┘│
│       │              │                                               │      │
│       │              ▼                                               ▼      │
│       │         ┌──────────┐                                   ┌──────────┐ │
│       │         │ REQ-xxx  │                                   │  全テスト │ │
│       │         │ Issue #nn│                                   │   PASS   │ │
│       │         └──────────┘                                   └────┬─────┘ │
│       │                                                             │       │
│  ═════╪═════════════════════════════════════════════════════════════╪═════  │
│       │                                                             │       │
│       │    【Git Flow】                                             ▼       │
│       │                                                       ┌──────────┐  │
│       ▼    ┌──────────┐    ┌──────────┐    ┌──────────┐      │トレーサビ│  │
│  ┌──────────┐feature  │───▶│   PR     │───▶│ develop  │      │リティ更新│  │
│  │  #nn    ││ ブランチ │    │Closes #nn│    │ マージ   │      └──────────┘  │
│  │ (起点)  │└──────────┘    └──────────┘    └──────────┘                     │
│  └──────────┘                                   │                            │
│                                                 ▼                            │
│                                           ┌──────────┐    ┌──────────┐      │
│                                           │ release  │───▶│   main   │      │
│                                           │ ブランチ │    │  + タグ  │      │
│                                           └──────────┘    └──────────┘      │
│                                                                │             │
│                                                                ▼             │
│                                                           Issue #nn         │
│                                                           自動クローズ       │
└─────────────────────────────────────────────────────────────────────────────┘
```

**人間が最初にやること**: GitHub Issue を作成する（または既存Issueを確認する）

### 2.2 仕様駆動開発（Spec-Driven Development）

#### 2.2.1 Forward フロー（新規開発）

```
┌────────────────┐
│  Issue作成     │  GitHub Issue #nn（起点）
│  (なぜ作るか)   │
└───────┬────────┘
        │
        ▼
┌────────────────┐
│   要件定義     │  docs/specs/requirements/REQ-xxx.md
│  (何を作るか)   │  ※ GitHub Issue欄に #nn を記載
└───────┬────────┘
        │
        ▼
┌────────────────┐
│   詳細仕様     │  docs/specs/domain/Xxx.spec.md
│  (どう作るか)   │  docs/specs/domain/Xxx.spec.yaml
└───────┬────────┘
        │
        ▼
┌────────────────┐
│  テストコード  │  src/**/__tests__/Xxx.test.ts
│  (検証方法)    │
└───────┬────────┘
        │
        ▼
┌────────────────┐
│    実装        │  src/**/Xxx.ts
│  (コード)      │
└───────┬────────┘
        │
        ▼
┌────────────────┐
│ トレーサビリティ│  要件 ← 仕様 ← テスト ← 実装
│    更新        │  全てのリンクを確認
└────────────────┘
```

##### 2.2.1.1 コミット粒度（2025/12/22現在）

> **注意**: 開発フローに習熟するまでは、以下の粒度でコミットすることを推奨します。
> 習熟後は、状況に応じて柔軟に運用してください。

| # | フェーズ | コミットメッセージ例 | 含める内容 |
|---|---------|---------------------|-----------|
| 1 | 要件定義 | `docs: XXXの要件定義を追加 (REQ-XXX-001)` | 要件定義書（Draft） |
| 2 | 仕様書 | `docs: XXXの詳細仕様を追加` | 仕様書 |
| 3 | テスト | `test: XXXのテストを追加` | テストコード（この時点では失敗） |
| 4 | 実装 | `feat: XXXを実装` | 実装コード + エクスポート追加 |
| 5 | トレーサビリティ | `docs: REQ-XXX-001のトレーサビリティを更新` | 要件定義書（Approved） |

**粒度の判断基準**: 1コミット = 1つの「状態遷移」

| 状態遷移 | コミットすべき理由 |
|---------|------------------|
| 要件なし → 要件Draft | 「何を作るか」が確定 |
| 要件のみ → 仕様あり | 「どう作るか」が確定 |
| 仕様のみ → テストあり | 検証方法が確定（テストファースト） |
| テスト失敗 → テストPASS | 実装完了の証拠 |
| Draft → Approved | 受け入れ完了 |

**例外ケース**:
- 軽微な修正（typo等）: 1コミットにまとめてOK
- 複数ファイル同時修正（実装+エクスポート）: 関連する変更は1コミット
- テスト失敗の修正: 実装コミットに含める

#### 2.2.2 Backward フロー（既存コード文書化）

```
┌────────────────┐
│  既存コード    │  src/**/Xxx.ts（既存）
│   分析        │
└───────┬────────┘
        │
        ▼
┌────────────────┐
│   仕様書       │  docs/specs/domain/Xxx.spec.md
│   作成        │  （コードから逆算）
└───────┬────────┘
        │
        ▼
┌────────────────┐
│  テストコード  │  src/**/__tests__/Xxx.test.ts
│   追加        │  （仕様を検証）
└────────────────┘
```

#### 2.2.3 成果物の関係

```
docs/specs/requirements/
├── REQ-CSV-001.md          ─────┐
                                 │ トレーサビリティ
docs/specs/domain/               │
├── CsvProjectCreator.spec.md ◀──┤
├── CsvProjectCreator.spec.yaml  │
                                 │
src/infrastructure/              │
├── CsvProjectCreator.ts    ◀────┤
├── __tests__/                   │
│   ├── CsvProjectCreator.test.ts ◀──┘
│   └── CsvProjectCreator.integration.test.ts
```

##### 2.2.3.1 案件仕様書とマスター設計書

仕様書には2種類ある：

| 種類 | 命名規則 | 役割 | 例 |
|------|---------|------|-----|
| **マスター設計書** | `{Class}.spec.md` | クラス全体の仕様 | `Project.spec.md` |
| **案件仕様書** | `{Class}.{feature}.spec.md` | 案件で追加した機能の仕様 | `Project.excludedTasks.spec.md` |

**ファイル構成:**

```
docs/specs/domain/
├── Project.spec.md                    # マスター設計書（クラス全体）
├── Project.spec.yaml
├── Project.excludedTasks.spec.md      # 案件仕様書（REQ-TASK-001）
├── TaskRow.spec.md                    # マスター設計書
└── ...
```

**案件完了後のマスター設計書への反映:**

```
案件仕様書                          マスター設計書
(Project.excludedTasks.spec.md)     (Project.spec.md)
         │                                 │
         │  PRマージ後                     │
         └────────────────────────────────▶│ 反映
                                           │
                                    ・メソッド追加
                                    ・変更履歴に記載
```

**反映内容:**

| 項目 | マスター設計書への反映 |
|------|----------------------|
| 新規メソッド/プロパティ | メソッド仕様セクションに追加 |
| 変更履歴 | 変更履歴セクションに案件ID・日付・概要を追記 |
| テストケース | テストシナリオセクションに追加（または参照） |

**反映タイミング:**
- PRがdevelop/mainにマージされた後
- トレーサビリティ更新の一環として実施
- 案件仕様書は履歴として残す（削除しない）

#### 2.2.4 トレーサビリティで実現できること

| 実現できること | 説明 | 具体例 |
|--------------|------|-------|
| **影響範囲の特定** | 要件変更時に、どの仕様・テスト・コードに影響するか即座に把握 | REQ-CSV-001の変更 → CsvProjectCreator.spec.md → CsvProjectCreator.ts → テスト |
| **テスト漏れ防止** | 要件に対応するテストが存在するか確認可能 | 要件IDからテストケースを逆引き |
| **コードの存在理由** | なぜそのコードが存在するのか、根拠を辿れる | `parseRow()`メソッド → 仕様書 → 要件「CSVの各行をパースする」 |
| **レビュー効率化** | PRレビュー時に要件・仕様との整合性を確認しやすい | 仕様書のテストケース一覧 vs 実際のテストコード |
| **新メンバーのオンボーディング** | 機能の全体像を要件→仕様→コードの流れで理解できる | 「CSV読込機能を理解したい」→ REQ-CSV-001.md から読み始める |

#### 2.2.5 改修時の運用ルール

仕様書には**変更履歴**を残し、トレーサビリティを維持する。

##### 仕様書ヘッダーの更新

```markdown
# CsvProjectCreator 詳細仕様

バージョン: 1.1.0              ← 改修時にバージョンアップ
作成日: 2025-12-16
更新日: 2025-12-20              ← 最終更新日を追記
要件ID: REQ-CSV-001, REQ-CSV-002  ← 新要件があれば追加
ソースファイル: src/infrastructure/CsvProjectCreator.ts
```

##### 変更履歴セクションの追加

```markdown
## 変更履歴

| バージョン | 日付 | 変更内容 | 要件ID |
|-----------|------|---------|--------|
| 1.0.0 | 2025-12-16 | 初版作成 | REQ-CSV-001 |
| 1.1.0 | 2025-12-20 | エンコード自動判定ロジックを改善 | REQ-CSV-002 |
| 1.2.0 | 2025-12-25 | 日付フォーマット対応を拡張 | REQ-CSV-001 |
```

**ポイント**:
- 1.1.0: 機能追加なので**新規要件ID（REQ-CSV-002）を払い出し**（2.2.6参照）
- 1.2.0: 既存機能のバグ修正なので既存要件ID（REQ-CSV-001）の改訂

##### バージョニング規則

| 変更種別 | バージョン | 例 |
|---------|-----------|-----|
| 破壊的変更（API変更） | メジャー（x.0.0） | 1.0.0 → 2.0.0 |
| 機能追加 | マイナー（0.x.0） | 1.0.0 → 1.1.0 |
| バグ修正・軽微な修正 | パッチ（0.0.x） | 1.0.0 → 1.0.1 |

#### 2.2.6 要件定義書の運用ルール

##### 要件ID払い出しの原則

**機能追加・拡張は、新規要件IDを払い出す**。既存要件定義書の「改訂」は限定的なケースのみ。

| 変更内容 | 対応 | 例 |
|---------|------|-----|
| 新しいプロパティ/メソッド追加 | **新規要件ID払い出し** | author追加 → REQ-VERSION-002 |
| 新しい機能の追加 | **新規要件ID払い出し** | エンコード自動判定 → REQ-CSV-002 |
| 既存動作の変更（破壊的変更） | **新規要件ID払い出し** | 戻り値の型変更 → REQ-xxx-003 |
| バグ修正（仕様通りに修正） | 既存要件IDの改訂 | 実装のバグを修正 |
| 表記修正・明確化 | 既存要件IDの改訂 | 説明文の改善 |
| ドキュメント追加（実装変更なし） | 既存要件IDの改訂 | テスト証跡の追加 |

##### 原則の理由

| 理由 | 説明 |
|------|------|
| **トレーサビリティの明確化** | 「何が追加されたか」を要件ID単位で追跡可能 |
| **影響範囲の特定** | 新機能が原因の問題発生時、該当要件IDから調査開始 |
| **変更履歴の粒度** | 仕様書の変更履歴が要件IDと対応し、変更理由が明確 |
| **レビュー効率化** | PRレビュー時に「この要件IDの実装」と明確に説明可能 |

##### 仕様書の要件ID参照

仕様書は対応する**全ての要件ID**を参照する。

```markdown
**要件ID**: REQ-CSV-001, REQ-CSV-002  ← 複数の要件IDを参照
```

これにより：
- どの要件に基づく仕様かが明確
- 要件変更時の影響範囲を特定可能
- 機能の変遷を追跡可能

##### NG例：既存要件定義書への機能追加

```markdown
# ❌ NG: 既存要件定義書に新機能を直接追記
REQ-VERSION-001.md に「authorプロパティ」を追記

# ✅ OK: 新規要件IDを払い出し
REQ-VERSION-002.md を新規作成（authorプロパティ追加の要件）
```

理由：
- 既存要件定義書を改訂すると「何が元々あったか」が不明瞭になる
- 変更履歴セクションでカバーできるが、要件ID単位の追跡ができない
- 仕様書・テストとの対応関係が曖昧になる

#### 2.2.7 開発中の修正フロー（同一案件の手戻り）

> **注意**: このセクションは**同一案件の開発中**に気づいた設計ミスの修正フローです。
> **既にリリースされた機能への追加・拡張**は、新規要件ID払い出し（2.2.6参照）で対応してください。

開発途中で「設計が違った」と気づいた場合のフロー。

##### 修正が必要になるケース

| 気づいたタイミング | 例 |
|------------------|-----|
| 仕様書作成中 | 要件の解釈が違った |
| テスト作成中 | メソッドの配置場所が違う |
| 実装中 | インターフェースの設計が不適切 |

##### 修正時の原則

**仕様書だけを修正するのはNG**。要件定義書との整合性を常に確認する。

| 変更内容 | 仕様書 | 要件定義書 |
|---------|:------:|:--------:|
| メソッド名変更 | ✓ | ✓ (インターフェース設計) |
| 配置場所変更 | ✓ | ✓ (関連ドキュメント) |
| 引数/戻り値変更 | ✓ | ✓ (インターフェース設計) |
| 内部実装の詳細のみ | ✓ | - |

##### 修正フロー図

```
気づき発生（テスト作成中/実装中）
    │
    ▼
┌─────────────────────────────┐
│ 要件定義書への影響を確認     │
│ - インターフェース設計（案） │
│ - 関連ドキュメント          │
│ - 受け入れ基準              │
└─────────────┬───────────────┘
              │
    ┌─────────┴─────────┐
    │                   │
    ▼                   ▼
影響あり             影響なし
    │                   │
    ▼                   │
要件定義書を修正       │
    │                   │
    └─────────┬─────────┘
              │
              ▼
        仕様書を修正
              │
              ▼
        テストを修正
              │
              ▼
        実装を修正/続行
              │
              ▼
    トレーサビリティ確認
    （全ドキュメントの整合性）
```

##### 大幅な設計変更が必要な場合

以下の場合は、要件定義からやり直すことを検討：

- 機能の目的自体が変わった
- 対象クラス/モジュールが根本的に違った
- 受け入れ基準を満たせない設計だった

この場合、既存の要件定義書のステータスを `Deprecated` にして新規作成するか、バージョンを上げて改訂する。

##### Claude Codeとの協働

設計変更が必要な場合、Claude Codeに相談して修正を進めることができる。

**相談できること:**

| 相談内容 | Claudeの対応 |
|---------|-------------|
| 「この設計だとXXが実現できない」 | 代替案を提案、影響範囲を分析 |
| 「メソッドの配置場所を変えたい」 | 要件定義・仕様書の修正箇所を特定 |
| 「要件自体を見直したい」 | 既存ドキュメントとの差分を整理 |
| 「この修正で他に影響ある？」 | トレーサビリティを辿って確認 |
| 「修正して」 | 要件定義・仕様書・テスト・実装を一括修正 |

**相談例:**

```
「REQ-VERSION-001で、getVersionInfo()をcommonじゃなくてdomainに
置きたくなった。要件定義書と仕様書、どこを直せばいい？」
```

→ Claudeが関連ファイルを読み、修正箇所をリストアップして修正を実行

**Claudeに伝えると良い情報:**

- 何が問題か（現状の設計の不具合）
- どうしたいか（変更後のイメージ）
- 影響範囲の懸念（あれば）

#### 2.2.8 GitHub Issue連携の実践

##### 要件定義書テンプレート（Issue連携版）

```markdown
# 要件定義書: XXX機能

**要件ID**: REQ-XXX-001
**GitHub Issue**: #nn              ← Issueへのリンク
**作成日**: 2025-12-22
**ステータス**: Draft | Approved | Implemented
**優先度**: High | Medium | Low

---

## 1. 概要
...
```

##### PRテンプレート（Issue連携版）

```markdown
## Summary
- XXX機能を実装

## Related Issue
Closes #nn

## Test plan
- [ ] 単体テスト追加
- [ ] 既存テスト通過確認
```

##### Issueへのドキュメントリンク記載

要件定義書作成後、Issue本文に関連ドキュメントへの参照を追記する。

**記載形式:**

```markdown
---

## 関連ドキュメント

本機能の詳細は以下を参照してください：

- **要件定義書**: `REQ-XXX-001` (`docs/specs/requirements/` 配下)
- **詳細仕様**: `Xxx.spec.md` (`docs/specs/domain/` 配下)
- **開発ブランチ**: `feature/xxx`

### ドキュメントリンク（mainマージ後に有効）

> **注意**: 以下のリンクは main ブランチへのマージ後に有効になります。それまでは 404 Not Found となります。

- [REQ-XXX-001.md](docs/specs/requirements/REQ-XXX-001.md)
- [Xxx.spec.md](docs/specs/domain/Xxx.spec.md)
```

**ポイント:**

| 項目 | 説明 |
|------|------|
| **直リンクを避ける理由** | ブランチ削除後にリンク切れするため |
| **相対パスの注意** | mainマージ前は404になる旨を明記 |
| **開発中の参照** | PRまたは開発ブランチを直接参照 |

##### 既存要件への対応

既にIssueなしで作成された要件定義書（REQ-CSV-001, REQ-VERSION-001）については：

| 対応方針 | 説明 |
|---------|------|
| **後付けIssue作成**（推奨） | 記録として残したい場合に作成 |
| **今後の運用から適用** | 過去分は現状維持、今後のみ適用 |

本プロジェクトでは「今後の運用から適用」を採用。既存要件は参考情報として現状維持。

### 2.3 ブランチ構成（Git Flow）

#### 2.3.1 ブランチ図

```
                         ┌─────────────────────────────────────────┐
                         │              main                       │
                         │   (本番リリース用・タグ付け)             │
                         └──────────────┬────────────────────────┬─┘
                                        │                        │
         ┌──────────────────────────────┼────────────────────────┼──┐
         │                              ▼                        ▼  │
         │  ┌─────────────────────────────────────────────────────┐ │
         │  │                    develop                          │ │
         │  │              (開発統合ブランチ)                      │ │
         │  └───┬─────────────────┬─────────────────┬─────────────┘ │
         │      │                 │                 │               │
         │      ▼                 ▼                 ▼               │
         │  ┌────────┐       ┌────────┐       ┌────────┐           │
         │  │feature/│       │feature/│       │release/│           │
         │  │  xxx   │       │  yyy   │       │ 0.0.x  │           │
         │  └────────┘       └────────┘       └────────┘           │
         │                                                         │
         └─────────────────────────────────────────────────────────┘
```

#### 2.3.2 ブランチの役割

| ブランチ | 命名規則 | 目的 | ライフサイクル |
|---------|---------|------|---------------|
| `main` | - | 本番リリース用。常に安定版 | 永続 |
| `develop` | - | 開発統合。次リリースの準備 | 永続 |
| `feature/*` | `feature/{機能名}` | 新機能開発 | 一時的（PR後削除） |
| `release/*` | `release/{バージョン}` | リリース準備 | 一時的（マージ後削除） |
| `hotfix/*` | `hotfix/{修正名}` | 緊急バグ修正 | 一時的（マージ後削除） |

#### 2.3.3 実際のブランチ例（本リポジトリより）

```
remotes/origin/main                        # 本番
remotes/origin/develop                     # 開発統合
remotes/origin/feature/resourcePlansCreator  # 要員計画機能
remotes/origin/feature/invalid             # validStatus機能
```

### 2.4 Feature開発フロー（Git操作）

```bash
# 1. developから feature ブランチを作成
git checkout develop
git pull origin develop
git checkout -b feature/csv-reader

# 2. 開発作業（仕様駆動開発サイクル）
#    - 要件定義書作成
#    - 仕様書作成
#    - テストコード作成
#    - 実装
#    - テスト実行・修正

# 3. コミット
git add .
git commit -m "feat: CSVファイルからProjectを生成する機能を追加"

# 4. リモートにプッシュ
git push -u origin feature/csv-reader

# 5. Pull Request作成（GitHub）
gh pr create --base develop --title "feat: CSV読み込み機能"

# 6. レビュー・マージ後、ローカルブランチ削除
git checkout develop
git pull origin develop
git branch -d feature/csv-reader
```

### 2.5 リリースフロー

```bash
# 1. developからreleaseブランチを作成
git checkout develop
git pull origin develop
git checkout -b release/0.0.18

# 2. バージョン更新
npm version 0.0.18 --no-git-tag-version
# package.json, CHANGELOG.md を更新

# 3. コミット
git add .
git commit -m "0.0.18"

# 4. mainにマージ
git checkout main
git merge --no-ff release/0.0.18

# 5. タグ作成
git tag 0.0.18

# 6. developにもマージ（タグをマージ）
git checkout develop
git merge --no-ff 0.0.18 -m "Merge tag '0.0.18' into develop"

# 7. プッシュ
git push origin main develop --tags

# 8. releaseブランチ削除
git branch -d release/0.0.18
```

---

## 3. コミットメッセージ規約

### 3.1 フォーマット

```
<type>: <subject>

[body]

[footer]
```

### 3.2 Type一覧

| Type | 説明 | 例 |
|------|------|-----|
| `feat` | 新機能 | `feat: CSV読み込み機能を追加` |
| `fix` | バグ修正 | `fix: 日付パースの不具合を修正` |
| `docs` | ドキュメント | `docs: README更新` |
| `refactor` | リファクタリング | `refactor: TaskRow計算処理を整理` |
| `test` | テスト | `test: CsvProjectCreatorのテスト追加` |
| `chore` | その他 | `chore: 依存関係更新` |

---

## 4. バージョニング

### 4.1 セマンティックバージョニング

```
MAJOR.MINOR.PATCH
  │     │     │
  │     │     └── バグ修正（後方互換あり）
  │     └──────── 機能追加（後方互換あり）
  └────────────── 破壊的変更（後方互換なし）
```

### 4.2 開発中バージョン（SNAPSHOT）

開発中のバージョンには `-SNAPSHOT` サフィックスを付与し、リリース済みバージョンと区別する。

#### 4.2.1 バージョン命名規則

| フェーズ | バージョン例 | 説明 |
|---------|------------|------|
| リリース済み | `0.0.17` | npm publishされた安定版 |
| 開発中（develop） | `0.0.18-SNAPSHOT` | 次リリースに向けた開発版 |
| 開発中（feature） | `0.0.18-SNAPSHOT.cli-npx` | 特定機能の開発版（並行開発時） |

#### 4.2.2 運用フロー

```
main (0.0.17)                          ← リリース済み
  │
  └── develop (0.0.18-SNAPSHOT)        ← 次版開発中
        │
        ├── feature/cli-npx (0.0.18-SNAPSHOT.cli-npx)
        │                              ↑ 並行開発時は機能名を付与
        └── feature/csv (0.0.18-SNAPSHOT.csv)
```

1. **リリース後**: developのバージョンを `X.Y.Z-SNAPSHOT` に更新
2. **feature開発時**:
   - 単独開発: `X.Y.Z-SNAPSHOT` のまま
   - 並行開発: `X.Y.Z-SNAPSHOT.機能名` に変更（任意）
3. **developマージ時**: `X.Y.Z-SNAPSHOT` に統一
4. **リリース時**: `-SNAPSHOT` を削除して `X.Y.Z` に

#### 4.2.3 semver準拠

`-SNAPSHOT` はsemverの有効なプレリリース識別子。バージョン比較:

```
0.0.17 < 0.0.18-SNAPSHOT < 0.0.18-SNAPSHOT.cli-npx < 0.0.18
```

#### 4.2.4 npm pack時の区別

並行開発時、各featureのビルドを区別するために機能名サフィックスを使用:

```bash
# feature/cli-npx ブランチ
npm version 0.0.18-SNAPSHOT.cli-npx --no-git-tag-version
npm pack
# → evmtools-node-0.0.18-SNAPSHOT.cli-npx.tgz
```

### 4.3 本プロジェクトのバージョン履歴

| バージョン | 主な変更 |
|-----------|---------|
| 0.0.17 | validStatusプロパティ追加 |
| 0.0.15 | 微調整 |
| 0.0.14 | リファクタリング、要員計画β版 |
| 0.0.13 | Diffに工数プロパティ追加 |
| ... | ... |

---

## 5. 本リポジトリのGitグラフ（実例）

```
*   Merge tag '0.0.17' into develop          (develop)
|\
| *   Merge branch 'release/0.0.17'          (main)
| |\
| | * 0.0.17                                  ← タグ: 0.0.17
| |/
|/|
* |   Merge pull request #43 feature/invalid  ← PR: validStatus
|\ \
| * | TaskRow : validStatusプロパティを追加
|/ /
* | Merge tag '0.0.15' into develop
|\|
| *   Merge branch 'release/0.0.15'
| |\
| | * 0.0.15
...
```

**特徴:**
- `feature/*` → `develop` へのPRマージ
- `release/*` → `main` へのマージでタグ作成
- タグを `develop` にもマージして同期

---

## 6. チェックリスト

### 6.1 Feature開発時

- [ ] **GitHub Issueを作成（または既存Issueを確認）**
- [ ] `develop`から`feature/*`ブランチを作成
- [ ] （並行開発時）バージョンを `X.Y.Z-SNAPSHOT.機能名` に変更
- [ ] 要件定義書を作成（**GitHub Issue欄に#nnを記載**）
- [ ] 仕様書を作成
- [ ] テストコードを作成
- [ ] 実装
- [ ] 全テストPASS確認
- [ ] トレーサビリティ更新
- [ ] （並行開発時）バージョンを `X.Y.Z-SNAPSHOT` に戻す
- [ ] PRを作成（**`Closes #nn`を記載**）
- [ ] レビュー・マージ

### 6.2 リリース時

- [ ] `develop`から`release/*`ブランチを作成
- [ ] バージョン番号更新（`-SNAPSHOT` を削除）
- [ ] CHANGELOG更新
- [ ] `main`にマージ
- [ ] タグ作成
- [ ] `develop`にタグをマージ
- [ ] **developのバージョンを次版SNAPSHOTに更新**（例: `0.0.19-SNAPSHOT`）
- [ ] npm publish（必要に応じて）

---

## 7. 関連ドキュメント

| ドキュメント | パス | 説明 |
|-------------|------|------|
| CLAUDE.md | `/CLAUDE.md` | プロジェクト技術ガイド |
| CHANGELOG.md | `/CHANGELOG.md` | 変更履歴 |
| 要件定義書 | `docs/specs/requirements/` | 機能要件 |
| 仕様書 | `docs/specs/domain/` | 詳細設計 |

---

## 8. 補足：現在の状態

**2025-12-16時点:**

`feature/claude-code-setup`ブランチで以下の作業を実施中:
- Claude Code導入（CLAUDE.md）
- 仕様駆動開発の導入（Jest環境、仕様書）
- CsvProjectCreator機能の開発（仕様駆動開発フローで実装）

Git Flowに従い、`develop`から分岐 → PR → `develop`へマージ の流れで進行。
